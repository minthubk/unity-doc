! プレハブ / Prefabs

$$Prefab$$ はアセットの一種であり、 $$Project View$$ に格納された、再利用ができる $$GameObject$$ です。プレハブは任意の数の複数のシーンにも、シーンごとも複数回でも挿しこむことが出来ます。プレハブをシーンに追加するとき、その $$instance$$ を作成します。全てのプレハブのインスタンスはもとのプレハブにリンクされていて元来はそのクローンです。プロジェクトにどんなにインスタンスが存在していても、プレハブに変更を加えると、変更は全てのインスタンスに対して適用されます。


!! プレハブの作成

プレハブを作成するためには、シーンで作成したゲームオブジェクトをプロジェクトビューにドラッグするだけです。ゲームオブジェクトの名前は青色となることでプレハブであることを示します。新しいプレハブの名前は変更することが出来ます。

これらの手順を行った後、ゲームオブジェクトおよびその全ての子オブジェクトはプレハブ データとしてコピーされています。プレハブは複数のインスタンスで再利用できます。階層ビューにおけるもとのゲームオブジェクトはプレハブのインスタンスとなります。

!! プレハブ インスタンス
現在のシーンでプレハブ インスタンスを作成するには、プレハブをプロジェクトビューから $$Scene$$ または 階層ビューにドラッグ＆ドロップします。このインスタンスはプレハブに対して $$Link$$ され、階層ビューでの名前は青色のテキストとなります。

Attach:LinkedPrefab.png
''3つのゲームオブジェクトはプレハブにリンクされています。ひとつはリンクされていません。''

* プレハブ インスタンスを選択して、全てのインスタンスに反映する変更をした場合、インスペクタで  ^^Select^^  ボタンを押すことでソース プレハブを選択できます。
* スクリプトからプレハブをインスタンス化する 方法については [[Instantiating Prefabs]] を参照下さい。

!!! 継承

継承とは、ソース プレハブが変更されたとき、それらの変更がリンクされたゲームオブジェクトに適用されることです。例えば、新しいスクリプトをプレハブに追加した場合、全てのリンクされたゲームオブジェクトは即座にスクリプトも含みます。しかし、リンクを維持しながらひとつのインスタンスのプロパティを変更することは可能です。プレハブ インスタンスの任意のプロパティを変更して、変数名が太字になることを確認します。変数はオーバーライドされません。全てのオーバーライドされたプロパティはソース プレハブの変更による影響を受けません。

これによりプレハブ インスタンスを修正して、プレハブのリンクを壊すことなく、ソース プレハブから独立させることが出来ます。

Attach:OverrideOff.png\\
''オーバーライドを有効化していない、リンクされたゲームオブジェクト''

Attach:OverrideOn.png\\
''いくつかのオーバーライドを有効化した（太字）、リンクされたゲームオブジェクト''

* ソース プレハブと全てのインスタンスを新しいオーバーライドされた値で更新したい場合は、インスペクタで ^^Apply^^ ボタンをクリックします。
** インスタンスの位置（相対でなく絶対）が同じ箇所とならないように、ルートのポジションと回転には適用 ''されない'' ことに留意下さい。しかし、ルートの子や祖先からの位置および回転は、ルートのTransformに対して相対的に算出されるため、変更は適用 ''されます'' 。
* もし特定のインスタンスでオーバーライドを破棄した場合は、 ^^Revert^^ ボタンをクリックします。


!! インポートされたプレハブ

Assets フォルダにメッシュアセットを配置したとき、Unityは自動的にファイルをインポートして、メッシュからプレハブに似たものを生成します。これは実際にはプレハブではなく、アセットファイルそのものです。アセットでのインスタンス化や作業については、通常のプレハブで作業をしているときに存在していないため、いくつかの制限事項があります。

Attach:PrefabsVsAssetIcons.png\\
''アセットアイコンがプレハブ アイコンとかなり違うことを確認して下さい''

アセットはシーン上でゲームオブジェクトとしてインスタンス化され、通常のプレハブのかわりにソースアセットにリンクされます。通常どおり、ゲームオブジェクトに対するコンポーネントの追加、削除が出来ます。しかし、アセット自身への変更は、アセットファイル自身にデータを追加してしまうため、反映することが出来ません。もし再利用したいものを作成しているのであれば、アセット インスタンスをプレハブとして、上記の「プレハブの作成」の手順に従うべきです。

__注意:__ もしアセットのインスタンスを選択した場合、インスタンスの ^^Apply^^ ボタンは ^^Edit^^ により置き換えられます。このボタンをクリックすることでアセットを編集しているアプリケーションが起動されます（例 Maya または Max）。

