!アニメーション イベントの使用

アニメーションクリップをさらに活用するには $$Animation Events$$ を使用します。タイムライン上の特定の地点でオブジェクトのスクリプト中の関数を呼び出しできます。
アニメーション イベントにより呼び出しされた関数はひとつの引数をとります。float, string, int, オブジェクト参照, AnimationEvent オブジェクトを指定できます。AnimationEvent はメンバー変数を持ち、float, string, int, オブジェクト参照, さらには関数呼び出しをトリガーしたイベントの情報を同時に関数に渡すことが出来ます。

[@
// アニメーション イベントからこの JavaScript 関数を呼び出しできる
function PrintFloat (theValue : float) {
	Debug.Log ("PrintFloat は次の値を用いて呼び出しされる " + theValue);
}
@]

現在の再生位置にアニメーション イベントを追加するには ~~Event~~ ボタンをクリックし、アニメーション上の任意の位置に追加するにはイベントをトリガーしたい位置でイベント ラインをダブルクリックします。追加した後、イベントを動かすにはマウスでドラッグします。イベントを削除するには選択して Delete を押すか、右クリックしてコンテキストメニューから Delete Event を選択します。

イベントを追加するとダイアログ ボックスがプロンプト表示されて、関数名および渡す引数の値を指定できます。

アニメーション イベント ポップアップ ダイアログによりどの引数で関数呼び出しをするか指定できます。
クリップに追加されたイベントはイベントライン上でマーカーとして表示されます。マーカー上でマウスオーバーすることで関数名および引数付きのツールチップが表示します。

Attach:AnimEventMarker.png

