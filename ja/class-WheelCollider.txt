! ホイール コライダ / Wheel Collider

$$Wheel Collider$$ は、陸上車両用の特殊なコライダです。 組み込み衝突検出、ホイール物理特性、スリップ ベースのタイヤ摩擦モデルを含みます。  ホイール以外のオブジェクトにも使用できますが、特にホイールのある車両向けに設計されています。

Attach:Inspector-WheelCollider.png\\
''ホイール コライダ コンポーネント。 ATI Technologies 社の厚意により提供された車両モデル。''

Attach:Inspector-WheelCollider2.png\\

!! プロパティ

||PROPS
||``Center`` ||オブジェクトのローカル空間でのホイールの中心。 ||
||``Radius`` ||ホイールの半径。 ||
||``Suspension Distance`` ||ホイール サスペンションの最大延長距離で、ローカル空間で測定されます。 サスペンションは常にローカルな Y 軸を通じて下に伸びます。 ||
||``Suspension Spring`` ||サスペンションが、スプリングと制動力を追加して、''Target Position'' に達しようとします。 ||
||>>>``Spring`` ||スプリング力が ''Target Position'' に到達しようとします。 値が大きいほど、サスペンションが ''Target Position'' に到達する速度が上がります。 ||
||>>>``Damper`` ||サスペンションの速度を制動します。 値が小さいほど''Suspension Spring''の速度が下がります。 ||
||>>>``Target Position`` |Suspension Distance に沿ったサスペンションの残りの距離。 0 は、完全に伸びきったサスペンションをマッピングし、1 は完全に縮まったサスペンションをマッピングします。 デフォルトは 0 で、通常の車両のサスペンションの動作に一致します。 ||
||``Mass`` ||ホイールの質量。 ||
||``Forward/Sideways Friction`` ||ホイールが前転または横転する際のタイヤの摩擦のプロパティ。 下記の [[#Friction|Wheel Friction Curves]] を参照してください。 ||


!! 詳細

ホイールの衝突検出は、ローカルな Y 軸を通じて、''Center''から下に光線を放つことで実行されます。 ホイールには、''Radius''があり、''Suspension Distance''に応じて、下に延長できます。 車両は、次の各種プロパティを使用して、スクリプティングから制御されます。 ''motorTorque''、''brakeTorque''と''steerAngle''。 詳細については、[[ScriptRef:WheelCollider.html|Wheel Collider scripting reference]] を参照してください。

ホイール コライダは、スリップ ベースの摩擦モデルを用いて、物理特性エンジンの残りとは別に摩擦を計算します。 これにより、より現実的な動作が可能になりますが、標準の [[class-PhysicMaterial|Physic Material]] 設定を無視するようになります。


!!! ホイール コライダの設定

ホイール コライダ オブジェクトを転動または回転させて、車両を制御しません。ホイール コライダが追加されたオブジェクトは常に車両自体に関連して固定される必要があります。 しかし、ホイールのグラフィック表示を回転および転動させたい場合があります。 これを行う最良の方法は、ホイール コライダと表示されているホイールに対して個々のオブジェクトを設定することです。

Attach:WheelsSetup.png\\
''ホイール コライダは、表示されているホイール モデルから切り離されます''

もしサスペンション位置にもとづきホイールのグラフィックス位置を更新したい場合、スクリプトリファレンスの [[ScriptRef:WheelCollider.GetGroundHit.html | WheelCollider.GetGroundHit]] のサンプルが活用できます。ホイールコライダのギズモのグラフィックスは再生中は更新されないことに留意して下さい:

Attach:WheelColliderGizmo.png\\
''Position of WheelCollider Gizmo in runtime using a suspension distance of 0.15''

!!! 衝突ジオメトリ

車両は高い速度を達成できるため、レース トラックでの衝突ジオメトリを正しく設定することは非常に重要です。 特に、[[class-MeshCollider|collision mesh]] に、表示されているモデル (フェンスのポールなど) を構成する小さい凹凸があってはいけません。 レース トラックに対する衝突メッシュは通常、表示メッシュとは独立して生成され、衝突メッシュをできるだけ滑らかにします。 また、薄いオブジェクトがあってもいけません。トラックの境界が薄い場合、衝突メッシュでそれを広くします (あるいは、車両がそこにいけない場合は、反対側を完全に除去します)。

Attach:WheelGeometries.png\\
''表示ジオメトリ (左) は衝突ジオメトリ (右) よりもはるかに複雑になります。'' 


!!!Wheel Friction Curves

摩擦は、下記の''Wheel Friction Curve''によって説明できます。 ホイールの前進 (転動) 方向および横方向に対し、個々の曲線があります。 両方向で、タイヤがスリップする量を最初に決定します (タイヤのゴムと道路間の速度差に基づきます)。 次に、接点にかけられるタイヤの力を突き止めるのにこのスリップ値が使用されます。

曲線は、入力として、タイヤのスリップを測定し、出力として、力を供給します。 この曲線は、2 つのセグメントのスプラインによって近似化されます。 1 つ目のセグメントが ''(0 , 0)'' から ''(``ExtremumSlip`` , ``ExtremumValue``)'' の終点まで構成されています。この終点で、曲線の接線が 0 になります。 2 つ目のセグメントが''(``ExtremumSlip`` , ``ExtremumValue``)'' から ''(AsymptoteSlip , AsymptoteValue)'' の終点まで構成されています。この終点で再び、曲線の接線が 0 になります。

Attach:WheelFrictionCurve.png\\
''ホイールの摩擦曲線の一般的な形状''

ゴムは延長することで、スリップを補正するので、現実のタイヤのプロパティは、低スリップの場合、強い力を発揮します。 後でスリップが非常に高くなった場合、タイヤが滑ったり、回ったりし始めた時に力が減ります。 そのため、タイヤの摩擦曲線は、上記画像のような形状になります。

||PROPS
||``Extremum Slip/Value`` ||曲線の極値点。 ||
||``Asymptote Slip/Value`` ||曲線の漸近線点。 ||
||``Stiffness`` ||''Extremum Value''および''Asymptote Value''に対する乗数 (デフォルトは 1)。 摩擦の剛性を変化させます。 これを 0 に設定すると、ホイールからのすべての摩擦が完全に無効になります。 通常、ランタイム時に剛性を修正して、スクリプティングから各種地盤材料をシミュレートします。 ||


!!ヒント
* より安定した車両の物理特性を得るため、特に高い速度を達成できるレーシング カーの場合に、[[class-TimeManager|Time Manager]] で、物理特性タイムスタンプの長さを減らしたい場合があります。
* 車両があまりにも簡単に転倒するのを防ぐには、スクリプトから、その [[class-Rigidbody|Rigidbody]] の重心を若干下げ、車両の速度に応じた ''下方への圧力'' を加えます。

